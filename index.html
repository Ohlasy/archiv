<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="utf-8">
    <title>Ohlasy | Archiv</title>
    <link href="http://ohlasy.info/lib/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="http://ohlasy.info/style/shared.css" rel="stylesheet">
    <link href="style.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    <script src="archiv.js"></script>
    <script src="views.js"></script>
</head>
<body>
    <header class="navbar navbar-default">
    <div class="container">
        <h1><a href="http://ohlasy.info/">Ohlasy <small>archiv článků</small></a></h1>
    </div>
    </header>

    <div class="container">
        <div id="controls"></div>
        <script>
        $.getJSON('http://ohlasy.info/api/articles.js', function(data) {
            var controls = document.getElementById('controls')
            var reload = function(items) {
                $('#results').empty().append(renderSearchResults(items))
            }
            var filters = {}
            // Authors
            var authors = collectPropertyValues(data, 'author')
            var authorFilterBox = buildComboBox(authors, 'Autor')
            authorFilterBox.onchange = buildPropertyFilter('author', filters, data, reload)
            controls.appendChild(authorFilterBox)
            // Categories
            var categories = collectPropertyValues(data, 'category')
            var categoryFilterBox = buildComboBox(categories, 'Rubrika')
            categoryFilterBox.onchange = buildPropertyFilter('category', filters, data, reload)
            controls.appendChild(categoryFilterBox)
            // Serials
            var serials = collectPropertyValues(data, 'serial')
            var serialFilterBox = buildComboBox(serials, 'Seriál')
            serialFilterBox.onchange = buildPropertyFilter('serial', filters, data, reload)
            controls.appendChild(serialFilterBox)
            // Render
            reload(data)
        })
        </script>
        <div id="results"></div>
    </div>
    <footer class="text-muted">
        <div class="container">
            <div class="row">
                <div class="col-md-8">
                    <ul class="list-unstyled">
                        <li><em>Ohlasy, internetové noviny <span class="nobreak">pro Boskovice a okolí</span></em>
                        <li>vydává spolek šílenců, <span class="nobreak">protože kdo jiný by dneska dělal noviny</span>
                        <li><a href="mailto:ohlasy@ohlasy.info">ohlasy@ohlasy.info</a>, <a href="/inzerce.html">inzerujte u nás!</a>
                        <li>+420 608 763 954
                        <li><a href="https://www.facebook.com/ohlasy">Facebook</a>
                    </ul>
                </div>
            </div>
        </div>
    </footer>
</body>
</html>
